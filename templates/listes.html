{% extends "base.html" %}
{% block title %}Listes - Contact Mailer{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Listes <span class="count">({{ listes|length }})</span></h1>
    <a href="{{ url_for('liste_new') }}" class="btn btn-primary">+ Nouvelle liste</a>
</div>

<div class="cards-grid">
    {% for liste in listes %}
    <div class="card">
        <div class="card-header">
            <h3>{{ liste.nom }}</h3>
            <span class="badge">{{ liste.count }} contacts</span>
        </div>
        {% if liste.description %}
        <p class="card-description">{{ liste.description }}</p>
        {% endif %}
        <div class="card-actions">
            <a href="{{ url_for('contacts', liste=liste.id) }}" class="btn btn-small">Voir contacts</a>
            <a href="{{ url_for('export_contacts', liste=liste.id) }}" class="btn btn-small">Exporter</a>
            <a href="{{ url_for('liste_edit', id=liste.id) }}" class="btn btn-warning btn-small">Modifier</a>
            <form method="POST" action="{{ url_for('liste_delete', id=liste.id) }}" style="display:inline">
                <button type="submit" class="btn btn-danger btn-small"
                        onclick="return confirm('Supprimer cette liste ? Les contacts ne seront pas supprimés.')">Suppr.</button>
            </form>
        </div>
    </div>
    {% else %}
    <p class="empty">Aucune liste créée</p>
    {% endfor %}
</div>
{% endblock %}
